---
layout: post
header-img: img/default-blog-pic.jpg
author: usinha
description: 
post_id: 16207
created: 2013/03/20 23:35:47
created_gmt: 2013/03/20 18:35:47
comment_status: open
---

# JMeter Post Processor - Regular Expression Extractor

<p>The <b>Apache JMeterâ„¢ </b>desktop application is open source software, a 100% pure Java application designed to load test functional behavior and measure performance. It was originally designed for testing Web Applications but has since expanded to other test functions.</p>
<p>The post can be broadly classified in 3 parts.. Who, When and How. <strong>Who</strong> covers the audience for the post. <strong>When</strong> exhibits the requirement for this post and <strong>How</strong> is the solution for the requirement.</p>
<p><span style="text-decoration: underline"><strong>Who:-</strong></span><strong> </strong>For those new to JMeter or trying to explore this tool from the scratch can refer to <a href="http://jmeter.apache.org/api/index.html">Javadocs</a> or the <a href="http://jmeter.apache.org/usermanual/index.html">User Manual</a>. As this post is trying to cover the usage of JMeter Post Processor Extension for extracting fields/values from the response, which can be used in subsequent or any further request or response (for assertions).</p>
<p><span style="text-decoration: underline"><strong>When:-</strong> </span>In one of my previous projects I needed to load test Web Services where service calls required authorisation headers, these authorisation headers were generated by a different web service and had an expiry time of 30 seconds, so the requirement was to generate the authorisation token before every service call and send it with the request as header (or you can also append it in URL). In this post I will try to cover some syntax details of the article.<!--more--></p>
<p><span style="text-decoration: underline"><strong>How:-</strong></span></p>
<p>As you can see in the image, there is a test plan created in JMeter.</p>
<p>Test Plan is testing a service called Get Descendants, to call this getDescendant service, we need to first call the logIn API, which in return respons with an authorization ticket/token which is required to access the getDescendant service, so to attain the same we have regular expression extractor added as a child of logIn service. To add this post processor right click on the Thread (logIN in this case) click on Add --&gt; Post Processor --&gt; Regular Expression Extractor.
<p style="text-align: center"><img class="wp-image-16216 aligncenter" alt="Test Plan _ JMeter" src="http://xebee.xebia.in/wp-content/uploads/2013/03/Screen-Shot-2013-03-20-at-11.42.50-PM.png" width="200" height="230" /></p>
<p style="text-align: center"></p></p>
<hr />
<h2><p style="text-align: center"><a href="http://xebee.xebia.in/wp-content/uploads/2013/03/Screen-Shot-2013-04-02-at-4.31.52-PM.png"><img class="aligncenter  wp-image-16558" alt="Screen Shot 2013-04-02 at 4.31.52 PM" src="http://xebee.xebia.in/wp-content/uploads/2013/03/Screen-Shot-2013-04-02-at-4.31.52-PM.png" width="700" height="230" /></a></p></h2>
<p><p style="text-align: center">Once selected we will find the following configuration or control panel visible.</p>
<p style="text-align: center"><a href="http://xebee.xebia.in/wp-content/uploads/2013/03/Screen-Shot-2013-03-20-at-11.54.01-PM.png"><img class="aligncenter  wp-image-16220" alt="Screen Shot 2013-03-20 at 11.54.01 PM" src="http://xebee.xebia.in/wp-content/uploads/2013/03/Screen-Shot-2013-03-20-at-11.54.01-PM.png" width="700" height="230" /></a></p>
<p style="text-align: center"></p>
<p style="text-align: left">-----------------------------------------------------------------------------------------------------------------------------------------------------------</p>
<p style="text-align: center"></p>
<span style="text-decoration: underline"><b>Parameters Description</b></span></p>
<p><strong>Name (Required: No): </strong>Descriptive name for this element that is shown in the tree.</p>
<p><strong>Apply to (Required Yes): </strong>This is for use with samplers that can generate sub-samples, e.g. HTTP Sampler with embedded resources, Mail Reader or samples generated by the Transaction Controller.
<ul>
    <li>Main sample only - only applies to the main sample</li>
    <li>Sub-samples only - only applies to the sub-samples</li>
    <li>Main sample and sub-samples - applies to both.</li>
    <li>JMeter Variable - assertion is to be applied to the contents of the named variable</li>
</ul>
Matching is applied to all qualifying samples in turn. For example if there is a main sample and 3 sub-samples, each of which contains a single match for the regex, (i.e. 4 matches in total). For match number = 3, Sub-samples only, the extractor will match the 3rd sub-sample. For match number = 3, Main sample and sub-samples, the extractor will match the 2nd sub-sample (1st match is main sample). For match number = 0 or negative, all qualifying samples will be processed. For match number &gt; 0, matching will stop as soon as enough matches have been found.</p>
<p><strong>Response Field to check (Required Yes): </strong>The following response fields can be checked:
<ul>
    <li>Body - the body of the response, e.g. the content of a web-page (excluding headers)</li>
    <li>Body (unescaped) - the body of the response, with all Html escape codes replaced. Note that Html escapes are processed without regard to context, so some incorrect substitutions may be made.</li>
</ul>
Note that this option highly impacts performances, so use it only when absolutely necessary and be aware of its impacts
<ul>
    <li>Body as a Document - the extract text from various type of documents via Apache Tika.</li>
</ul>
Note that Body as a Document option can impact performances, so ensure it is Ok for your test
<ul>
    <li>Headers - may not be present for non-HTTP samples</li>
    <li>URL</li>
    <li>Response Code - e.g. 200</li>
    <li>Response Message - e.g. OK</li>
</ul>
Headers can be useful for HTTP samples; it may not be present for other sample types.</p>
<p><strong>Reference Name (Required Yes): </strong>The name of the JMeter variable in which to store the result. Also note that each group is stored as [refname]_g#, where [refname] is the string you entered as the reference name, and # is the group number, where group 0 is the entire match, group 1 is the match from the first set of parentheses, etc.</p>
<p><strong>Regular Expression (Required Yes): </strong>The regular expression used to parse the response data. This must contain at least one set of parentheses "()" to capture a portion of the string, unless using the group $0$. Do not enclose the expression in / / - unless of course you want to match these characters as well.</p>
<p><strong>Template</strong> <strong>(Required Yes): </strong>The template used to create a string from the matches found. This is an arbitrary string with special elements to refer to groups within the regular expression. The syntax to refer to a group is: '$1$' to refer to group 1, '$2$' to refer to group 2, etc. $0$ refers to whatever the entire expression matches.</p>
<p><strong>Match No.(Required Yes):</strong> Indicates which match to use. The regular expression may match multiple times.
<ul>
    <li>Use a value of zero to indicate JMeter should choose a match at random.</li>
    <li>A positive number N means to select the nth match.</li>
    <li>Negative numbers are used in conjunction with the ForEach controller - see below.</li>
</ul>
<strong>Default Value (Required No):</strong> If the regular expression does not match, then the reference variable will be set to the default value. This is particularly useful for debugging tests. If no default is provided, then it is difficult to tell whether the regular expression did not match, or the RE element was not processed or maybe the wrong variable is being used.</p>
<p>However, if you have several test elements that set the same variable, you may wish to leave the variable unchanged if the expression does not match. In this case, remove the default value once debugging is complete.</p>
<p>If the match number is set to a non-negative number, and a match occurs, the variables are set as follows:
<ul></p>